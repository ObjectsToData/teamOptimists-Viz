<link rel="import" href="stat-bar.html">
<link rel="import" href="../vendor/core-tooltip/core-tooltip.html">

<polymer-element name="stat-widget" attributes="vote">

  <template> <!-- attributes="vote votes"> -->
    <style type="text/css">
      h1 {
          background-color: black;
          color:#E8E8E8;
          font-family: NittyNormal;
        }

      .mapBar {
        display: block;
        width: 80%;
        height: 25%;
        margin: 20px auto;
      }  

    </style>
    
    <div class="mapBar">
      <h1>Thanks_for_your_input_</h1>
      <h1>We_wanted_to_do_so_much_more_</h1>
      <h1>But_there_is_trouble_with_the_govermental_dataset_</h1>
    </div>

    <template repeat="{{ chosenConcepts in dataForStatBar }}">
      <stat-bar concept="{{ chosenConcepts }}"></stat-bar>
    </template>

    <h1 class="mapBar">OEF_look_at_all_the_broken_links_</h1>

  </template>

  <script>    
    Polymer('stat-widget', {
      voteChanged: function(){
        console.log('vote from within stat-widget:');
        console.log(this.vote);
        var choices = this.vote.concepts;
        for(var item in this.concepts) {
          var name = this.concepts[item].name;
          for(var i = 0; i < choices.length; i++) {
            if(name === choices[i]) {
              this.dataForStatBar.push(this.concepts[item]);
              console.log('logging next dataForStatBar: ' + i);
              console.log(this.dataForStatBar[i]);
            }
          }
        }
      },     
      concepts:
      [ 
    { total: 48,
    working: 5,
    semiWorking: 8,
    notWorking: 1,
    name: 'security' },
    { total: 1,
    working: 1,
    semiWorking: 0,
    notWorking: 0,
    name: 'wealth' },
    { total: 63,
    working: 24,
    semiWorking: 0,
    notWorking: 32,
    name: 'transport' },
    { total: 67,
    working: 7,
    semiWorking: 23,
    notWorking: 12,
    name: 'health' },
    { total: 649,
    working: 129,
    semiWorking: 170,
    notWorking: 115,
    name: 'nature' },
    { total: 229,
    working: 114,
    semiWorking: 36,
    notWorking: 5,
    name: 'family' }
    
      ],
      // vote: {
      //   id: 1,
      //   houseType: "flat",
      //   conceptChoice: ["security", "wealth", "health"]
      // },
      dataForStatBar: [],
      ready: function(){
      //   var choices = this.vote.conceptChoice;
      //   for(var object in this.concepts) {
      //     var name = this.concepts[object].name;
      //     for(var i = 0; i < choices.length; i++) {
      //       if(name === choices[i]) {
      //         this.dataForStatBar[i] = this.concepts[object];
      //         console.log(this.dataForStatBar[i]);
      //       }
      //     }
      //   }
      }

    });
  </script>
</polymer-element>
