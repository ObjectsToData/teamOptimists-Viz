<!-- The element include -->
<link rel="import" href="../vendor/polymer/polymer.html">
<link rel="import" href="combine-vote.html">
<link rel="import" href="db-save.html">
<link rel="import" href="db-retrieve.html"> 
<link rel="import" href="stat-widget.html">
<link rel="import" href="map-element.html">
    
<polymer-element name="cth-housemouse">

    <template>

		<!-- Bootstrap Core CSS -->
		<link href="../styles/bootstrap.min.css" rel="stylesheet" type="text/css">

		<!-- font for arrow -->
		<!-- <link href="h
		ttp://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->

		<!-- Custom Theme CSS -->
		<link href="../styles/style.css" rel="stylesheet">


		<nav class="navbar navbar-custom  navbar-fixed-top  clearTransform" role="navigation">
		    <div class="container">
		        <div class="navbar-header">
		          
		            <a class="navbar-brand" href="#page-top">
		              <span class="light">Im here, but im still ugly --- > look at me nav back at bottom</span>
		            </a>
		        </div>

		        <div class="navrectangle ">
		            <ul class="nav navbar-nav">
		             
		                <li class="page-scroll bol">
		                    <a href="#page-top"></a>
		                </li>
		             
		                <li class="page-scroll bol">
		                    <a href="#about"></a>
		                </li>
		                <li class="page-scroll bol">
		                    <a href="#download"></a>
		                </li>
		                <li class="page-scroll bol">
		                    <a href="#contact"></a>
		                </li>
		            </ul>
		         
		        </div>

		    </div>
		</nav>

        <section class="intro p1">
            <div id="page-top" class="intro-body">
                	<div class="logowrapper">
                        <img data-scroll-reveal="enter from bottom 10px over .8s after 0.3s" class="logowhatdoes" src="../images/whatdoes.svg"/>
				        <img data-scroll-reveal="enter from bottom 10px over .9s after 1s" class="logohouse" src="../images/house.svg"/>
				        <img data-scroll-reveal="enter from bottom 10px over .9s after 1.5s" class="logomeantoyou" src="../images/meantoyou.svg"/>
				    </div>     

                    <!-- <div class="page-scroll">
                        <a href="#about" class="btn btn-circle">
                            <i class="fa fa-angle-double-down animated"></i>
                        </a>
                    </div> -->
            </div>
        </section>

        <section id="about" class="intro p2">
            <div class="intro-body">
                <combine-vote singleVote="{{ singleVote }}"></combine-vote>
            </div>
        </section>
            
        
        <db-save combinedvote="{{ singleVote }}"></db-save>
        <db-retrieve publishedData="{{ retrieved }}"></db-retrieve>

        <section id="download" class="intro p3">
            <div class="centerer">  
                <map-element class="chart" data="{{retrieved}}"></map-element>
            </div>
        </section>

        <section id="contact" class="intro p4">
            <div class="centerer">  
                <stat-widget vote="{{ singleVote }}"></stat-widget>
            </div>
        </section>

        <section class="footerarea">    
            <div class="centerer">  
                <a href="disclaimer.html" class="footer"> disclaimer </a>   
            <div>
        </section>
		
    </template>
    

    <script>
        Polymer('cth-housemouse', {

            singleVoteChanged: function(){
                console.log('singleVote from within umbrella:');
                console.log(this.singleVote);
            },

            ready: function() {

                // Wrote a workarround to target our elements inside the shadowRoot correctly, its a dirty fix, but it works. Might be that another library would work better for our case. The animation isn't that complicated. 

                window.workArroundScrollReveal = this.shadowRoot.querySelectorAll('[data-scroll-reveal]');

                // Normal call of scrollReveal

                window.scrollReveal = new scrollReveal();


                // Navbar workarround

                //jQuery to collapse the navbar on scroll

                var scrollingWorkArround = this.shadowRoot;

                $(scrollingWorkArround).scroll(function() {
                    if ($(".navbar").offset().top > 50) {
                        $(".navbar-fixed-top").addClass("top-nav-collapse");
                    } else {
                        $(".navbar-fixed-top").removeClass("top-nav-collapse");
                    }
                });

                //jQuery for page scrolling feature - requires jQuery Easing plugin
                // $(function() {
                //     $('.page-scroll a').bind('click', function(event) {
                //         var $anchor = $(this);
                //         $('html, body').stop().animate({
                //             scrollTop: $($anchor.attr('href')).offset().top
                //         }, 1500, 'easeInOutExpo');
                //         event.preventDefault();
                //     });
                // });

            }
        });
        
    </script>

    <script src="../vendor/jquery.min.js"></script>
    <script src="../vendor/bootstrap.min.js"></script>
    <script src="../vendor/jquery.easing.min.js"></script>

    <!-- Revealing scroll for the logo -->
    <script src="../scripts/CTH-VERSION-scrollReveal.js"></script>

</polymer-element>